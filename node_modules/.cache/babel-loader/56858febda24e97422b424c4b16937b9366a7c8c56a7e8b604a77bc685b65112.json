{"ast":null,"code":"import _slicedToArray from\"/home/lino/Documents/projects/business-sector-test-task/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useAppSelector}from'../hooks/storeHooks';import{config}from'../config.d';import{useParams}from'react-router-dom';import{useEffect,useState}from'react';import{Link}from'react-router-dom';import{filterPostsBy}from'../lib/filterPostsBy';import{defineNavBarLimits}from'../lib/defineNavBarLimits';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function NavBar(_ref){var navigationLimits=_ref.navigationLimits,setNavigationLimits=_ref.setNavigationLimits;var postPageCount=useParams().postPageCount||0;var _useAppSelector=useAppSelector(function(state){return[state.posts.posts,state.searchString.searchString];}),_useAppSelector2=_slicedToArray(_useAppSelector,2),posts=_useAppSelector2[0],searchString=_useAppSelector2[1];var _useState=useState(posts),_useState2=_slicedToArray(_useState,2),shownPosts=_useState2[0],setShownPosts=_useState2[1];var _useState3=useState(Math.ceil(shownPosts.length/config.maxPostsQuantity||1)),_useState4=_slicedToArray(_useState3,2),maxPagesCount=_useState4[0],setMaxPagesCount=_useState4[1];useEffect(function(){var filteredPosts=posts.filter(function(post){return filterPostsBy(post,searchString.trim());});setShownPosts(filteredPosts);setMaxPagesCount(Math.ceil(filteredPosts.length/config.maxPostsQuantity||1));},[posts,searchString]);useEffect(function(){setNavigationLimits(defineNavBarLimits(+postPageCount,maxPagesCount));},[postPageCount,shownPosts]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between w-11/12 mx-auto py-4 px-4\",children:[/*#__PURE__*/_jsx(Link,{to:'/'+Math.max(+postPageCount-1,1),className:\"text-3xl font-semibold\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:Array(maxPagesCount).fill(0).map(function(_,idx){return idx+1;}).slice(navigationLimits.min,navigationLimits.max).map(function(pageCount){return/*#__PURE__*/_jsx(Link,{className:\"mr-4 font-bold italic text-lg color-\".concat(pageCount===+postPageCount?\"green\":\"gray\"),to:'/'+pageCount,children:pageCount},pageCount);})}),/*#__PURE__*/_jsx(Link,{to:'/'+Math.min(+postPageCount+1,maxPagesCount),className:\"text-3xl font-semibold\",children:\"\\u0414\\u0430\\u043B\\u0435\\u0435\"})]});}","map":{"version":3,"names":["useAppSelector","config","useParams","useEffect","useState","Link","filterPostsBy","defineNavBarLimits","jsx","_jsx","jsxs","_jsxs","NavBar","_ref","navigationLimits","setNavigationLimits","postPageCount","_useAppSelector","state","posts","searchString","_useAppSelector2","_slicedToArray","_useState","_useState2","shownPosts","setShownPosts","_useState3","Math","ceil","length","maxPostsQuantity","_useState4","maxPagesCount","setMaxPagesCount","filteredPosts","filter","post","trim","className","children","to","max","Array","fill","map","_","idx","slice","min","pageCount","concat"],"sources":["/home/lino/Documents/projects/business-sector-test-task/src/components/NavBar.tsx"],"sourcesContent":["import { useAppSelector } from '../hooks/storeHooks';\nimport { RootState } from '../store';\nimport { config } from '../config.d';\nimport { useParams } from 'react-router-dom';\n\nimport { useEffect, useState } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { filterPostsBy } from '../lib/filterPostsBy';\nimport { INavigationLimits, IPost } from '../types';\nimport { defineNavBarLimits } from '../lib/defineNavBarLimits';\n\ninterface IProps {\n  navigationLimits: INavigationLimits;\n  setNavigationLimits: React.Dispatch<React.SetStateAction<INavigationLimits>>;\n}\n\nexport function NavBar({ navigationLimits, setNavigationLimits }: IProps) {\n  const postPageCount = useParams().postPageCount || 0;\n  const [posts, searchString] = useAppSelector((state: RootState) => {\n    return [state.posts.posts, state.searchString.searchString]\n  });\n  const [shownPosts, setShownPosts] = useState<IPost[]>(posts);\n  const [maxPagesCount, setMaxPagesCount] = useState<number>(Math.ceil(shownPosts.length / config.maxPostsQuantity || 1));\n\n  useEffect(() => {\n    const filteredPosts = posts.filter(post => filterPostsBy(post, searchString.trim()));\n\n    setShownPosts(filteredPosts);\n    setMaxPagesCount(Math.ceil(filteredPosts.length / config.maxPostsQuantity || 1));\n  }, [posts, searchString]);\n\n  useEffect(() => {\n    setNavigationLimits(defineNavBarLimits(+postPageCount, maxPagesCount));\n  }, [postPageCount, shownPosts]);\n\n  return (\n    <div className='flex items-center justify-between w-11/12 mx-auto py-4 px-4'>\n      <Link to={'/' + Math.max((+postPageCount - 1), 1)} className='text-3xl font-semibold'>Назад</Link>\n      <div className='flex items-center justify-center'>\n        {\n          Array(maxPagesCount)\n            .fill(0)\n            .map((_, idx) => idx + 1)\n            .slice(navigationLimits.min, navigationLimits.max)\n            .map(pageCount => {\n              return (\n                <Link\n                  key={pageCount}\n                  className={`mr-4 font-bold italic text-lg color-${pageCount === +postPageCount ? \"green\" : \"gray\"}`}\n                  to={'/' + pageCount}>\n                  {pageCount}\n                </Link>\n              );\n            })\n        }\n      </div>\n      <Link to={'/' + Math.min((+postPageCount + 1), maxPagesCount)} className='text-3xl font-semibold'>Далее</Link>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}